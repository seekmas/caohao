/*! Fancy Validate v0.1 | Copyright 2012 cormin.lu@gmail.com | MIT Licensed | Build 02/01/2012 */
(function(a){function l(a,b,e){function h(){a.value&&c.addClass(f,"w-hide")}if(!(this instanceof l))return new l(a,b);var f=document.createElement("span");if(e){var g=document.createElement("span");a.parentNode.insertBefore(g,a),g.appendChild(f),g.appendChild(a),c.addClass(g,"w-wrapper")}else a.parentNode.insertBefore(f,a);c.addClass(f,"w-label"),f.innerHTML=b,f.style.height=f.style.lineHeight=a.offsetHeight+"px",h(),d.add(a,"focusin",function(){h(),a.value||c.addClass(f,"w-active")}),d.add(a,"focusout",function(){a.value||c.removeClass(f,"w-active w-hide")}),d.add(a,"keyup",h),d.add(f,"click",function(){h(),c.focus(a)})}var b=a.core,c=a.dom,d=a.event,e={email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,url:/^(http|https|ftp)\:\/\/[a-z\d\-\.]+\.[a-z]{2,3}(:[a-z\d]*)?\/?([a-z\d\-\._\?\,\'\/\\\+&amp;%\$#\=~])*$/i,rfc3896url:new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,date:/^(19|20)\d\d([- /.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])(?: ([01]\d|2[0-3])(:[0-5]\d){0,2})?$/,time:/^([01]\d|2[0-3])(:[0-5]\d){0,2}$/,zipcode:/^\d{6}$/,compressed:/.+\.(7z|zip|rar|tar|taz|tgz|gz|gzip)$/i,picture:/.+\.(jpe?g|bmp|png|gif|ico|pcx|tif|raw|tga)$/i,chinese:/^[\u0391-\uFFE5\u4e00-\u9fa5]+$/,phone:/^([(]?0\d{2,3}[)]?[-]?)?\s?\d{4}\-?\d{4}(-\d+)?$/,mobile:/^(1[3458])\d{9}$/},f={email:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740",url:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u7684URL\u5730\u5740",ipv4:"\u8bf7\u8f93\u5165\u6709\u6548\u7684ip\u5730\u5740",date:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u65e5\u671f",time:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u65f6\u95f4",zipcode:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u90ae\u7f16",compressed:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u6709\u6548\u7684\u538b\u7f29\u6587\u4ef6",picture:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u6709\u6548\u7684\u56fe\u7247\u6587\u4ef6",chinese:"\u8bf7\u8f93\u5165\u4e2d\u6587",phone:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u7535\u8bdd\u53f7\u7801",mobile:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u624b\u673a\u53f7\u7801"},g={11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"},h=function(a){var b,c=0;if(!/^\d{17}(\d|x)$/i.test(a))return"\u4f60\u8f93\u5165\u7684\u8eab\u4efd\u8bc1\u957f\u5ea6\u6216\u683c\u5f0f\u9519\u8bef";a=a.replace(/x$/i,"a");if(!g[parseInt(a.substr(0,2))])return"\u4f60\u7684\u8eab\u4efd\u8bc1\u5730\u533a\u975e\u6cd5";sBirthday=a.substr(6,4)+"-"+Number(a.substr(10,2))+"-"+Number(a.substr(12,2)),b=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate())return"\u8eab\u4efd\u8bc1\u4e0a\u7684\u51fa\u751f\u65e5\u671f\u975e\u6cd5";for(var d=17;d>=0;d--)c+=Math.pow(2,d)%11*parseInt(a.charAt(17-d),11);return c%11!=1?"\u4f60\u8f93\u5165\u7684\u8eab\u4efd\u8bc1\u53f7\u975e\u6cd5":!0};a.addMethod("idcard",function(a,b){return this.optional(b)||h(a)===!0},"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u8eab\u4efd\u8bc1\u53f7\u7801"),b.each(e,function(b,c){a.addPattern(c,b,f[c])});var i=b.ajax=function(a){this.url=a,this.xhr=i.create()};b.extend(i,{create:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");b.error("XMLHTTP object could be created.")},param:function(a){var c=[];if(b.isArray(a))b.each(a,function(){c.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value))});else for(var d in a)b.isArray(a[d])?b.each(a[d],function(){c.push(encodeURIComponent(d)+"="+encodeURIComponent(this))}):c.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return c.join("&").replace(/%20/g,"+")},prototype:{request:function(a){var b,c=this.url,d=this.xhr,e=a.method||"POST";this.isrun&&(this.isrun=!1,d.abort()),this.isrun=!0,d.onreadystatechange=function(){d.readyState==4&&a.callback(d.responseText,d.status,d)};try{b=i.param(a.data),d.open(e,c,!0),d.setRequestHeader("Content-Length",b.length),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(b)}catch(f){a.callback&&a.callback(d.responseText,d.status,d,f)}finally{this.isrun=!1}},abort:function(){this.xhr&&this.xhr.abort()}}});var j={ing:"\u6b63\u5728\u8bf7\u6c42...",failed:"\u9a8c\u8bc1\u5931\u8d25",error:"\u8bf7\u6c42\u5931\u8d25"},k=function(a){return a==1};a.addMethod("ajax",function(a,c,d){var e=this,f=this.attr(c),g=this.getKey(c),h=this.settings.messages[g],l=b.isString(d)?d:d.url,m=d.callback||k;return h||(h=this.settings.messages[g]={}),f.ajax||(f.ajax=new i(l),f.ajaxMessage=h.ajax),h.ajax=j.ing,f.ajax.request({data:{key:a},callback:function(a,b,d,g){var i=b==200&&m(a),k=(h.ajax=b==200?f.ajaxMessage:j.error)||j.failed;e.addResult(i,c,k),e.hideErrors(),e.showErrors()}}),this.optional(c)||!1},j.ing),b.extend(!0,a,{watermark:l,getKeyForAspnet:function(c){if(!c.name)return;if(b.inArray("__EVENTTARGET __EVENTARGUMENT __VIEWSTATE __EVENTVALIDATION".split(" "),c.name)>-1)return;var d=c.name.split("$"),e=d.length,f;return e===1?d[0]:(f=d[e-1],a.core.isDigit(f)?d[e-2]:f)},placeHolder:function(a){var d,e="placeholder"in document.createElement("input");e||b.each(a,function(a){d=c.attr(a,"placeholder"),d&&l(a,d)})},bubbleTip:function(b,d){c.addClass(b,"b-b e-bubble"),a.appendContainer.call(this,b,d),b.innerHTML='<span class="b-cor b-cor10 e-b-bot"></span><span class="b-cor b-cor10 e-b-top"></span><p class="b-con"></p>',b.textNode=b.childNodes[2]},arrowTip:function(b,d){c.addClass(b,"b-b e-arrow"),a.appendContainer.call(this,b,d),b.innerHTML='<span class="b-cor b-cor15"></span><p class="b-con"></p>',b.textNode=b.childNodes[1]},tipText:function(a,b){a.textNode.innerHTML=b},prototype:{placeHolder:function(){a.placeHolder(this.elements())}}})})(window.fancy)